<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Which Spain is calling you?</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>

  <!-- Map Section -->
  <section id="mapSection" class="active">
    <div id="legend">
      <!-- City Search Box -->
      <div id="citySearchContainer">
        <input type="text" id="citySearchInput" placeholder="ğŸ” Search for a city..." autocomplete="off">
        <div id="citySearchResults"></div>
      </div>
      
      <h2> <img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Flag_of_Spain.svg" alt="Spain"
          class="flag-icon" alignment="centered"><br><br>Which Spain is calling you?</h2>
      <p>A tool to decide where to travel or where to migrate!âœˆï¸</p><br>
      <p>Cities are sized and colored based on your preferences:</p>
      <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 10px;">
        <div style="display: flex; align-items: center; gap: 10px;">
          <svg width="20" height="20">
            <circle cx="10" cy="10" r="8" fill="#3dde83" stroke="#fff" stroke-width="1.5"/>
          </svg>
          <span style="font-size: 0.9em;">High score</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
          <svg width="20" height="20">
            <circle cx="10" cy="10" r="8" fill="#2e8d57" stroke="#fff" stroke-width="1.5"/>
          </svg>
          <span style="font-size: 0.9em;">Medium score</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
          <svg width="20" height="20">
            <circle cx="10" cy="10" r="8" fill="#044613" stroke="#fff" stroke-width="1.5"/>
          </svg>
          <span style="font-size: 0.9em;">Low score</span>
        </div>
      </div>
    </div>
    
    <!-- Zoom Controls -->
    <div id="zoomControls">
      <button id="zoomInBtn" class="zoom-btn" title="Zoom In">+</button>
      <button id="zoomResetBtn" class="zoom-btn" title="Reset Zoom">âŠ™</button>
      <button id="zoomOutBtn" class="zoom-btn" title="Zoom Out">âˆ’</button>
    </div>
    
    <!-- Right Sidebar for Criteria Selection -->
    <div id="criteriaPanel">
      <button id="togglePanelBtn" class="toggle-panel-btn" title="Minimize/Maximize Panel">
        <span id="toggleIcon">â–¶</span>
      </button>
      
      <div id="panelContent">
        <div class="panel-header">
          <h3>ğŸ¯ Your Priorities</h3>
          <p class="panel-subtitle">Select criteria and adjust weights</p>
          
          <!-- Tourist / Migrant Filter Toggle -->
          <div class="filter-toggle">
            <label class="filter-option">
              <input type="radio" name="userType" value="migrant" checked>
              <span>ğŸ  Migrant</span>
            </label>
            <label class="filter-option">
              <input type="radio" name="userType" value="tourist">
              <span>âœˆï¸ Tourist</span>
            </label>
          </div>
        </div>
        
        <div class="panel-section">
          <h4>Select Criteria (max 5)</h4>
          <div id="criteriaCheckboxList"></div>
        </div>
        
        <div class="panel-section" id="weightsSection" style="display: none;">
          <h4>Adjust Weights</h4>
          <div id="criteriaWeightsList"></div>
          <button class="action-button" id="updateMapBtn">Update Map</button>
        </div>
      </div>
    </div>
    
    <div id="mapContainer"></div>
    
    <!-- City Detail View (hidden by default) -->
    <div id="cityDetailView" style="display: none;">
      <div id="cityDetailHeader">
        <h2 id="cityDetailTitle"></h2>
        <button id="backToMapBtn" class="back-btn">â† Back to Spain Map</button>
      </div>
      
      <!-- City Zoom Controls -->
      <div id="cityZoomControls">
        <button id="cityZoomInBtn" class="zoom-btn" title="Zoom In">+</button>
        <button id="cityZoomResetBtn" class="zoom-btn" title="Reset Zoom">âŠ™</button>
        <button id="cityZoomOutBtn" class="zoom-btn" title="Zoom Out">âˆ’</button>
      </div>
      
      <div id="cityDetailMapContainer"></div>
    </div>
  </section>

  <!-- Load map script -->
  <script src="mapping-script.js"></script>

</body>

</html>